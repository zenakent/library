<!DOCTYPE html>
<html>
    <head>
        <title>Online Library System</title>
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/stylesheets/main.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
    <body>
        
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <a class="navbar-brand" href="/library"><h4><i class="fas fa-book-reader"></i>Library</h4></a>
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                  
                  
                 
                  
                  
                  
                  
                 <!--search bar-->
                  <p>
                      <form action="/library" method="GET" class="form-inline">
                            <div class="form-group">
                                <input type="text" name="search" placeholder="Book Search" class="form-control">
                                <input type="submit" value="search" class="btn btn-light">
                            </div>
                        </form>
                    </p>
                    
                    <!--Genre list-->
                    <ul class="navbar-nav">
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Genre
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                          <a class="dropdown-item" href="https://library-with-notification-zenakent.c9users.io/library?search=adventure">Adventure</a>
                           <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="https://library-with-notification-zenakent.c9users.io/library?search=Romance">Romance</a>
                           <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="https://library-with-notification-zenakent.c9users.io/library?search=Science+Fiction">Science Fiction</a>
                           <div class="dropdown-divider"></div>
                           <a class="dropdown-item" href="https://library-with-notification-zenakent.c9users.io/library?search=fantasy">Fantasy</a>
                           <div class="dropdown-divider"></div>
                        </div>
                      </li>
                  </ul>
                    
                <ul class="navbar-nav ">
                    <% if (!currentUser) { %>
                        <li class="nav-item" ><a class="nav-link" href="/login">Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="/register">Sign Up</a></li>
                    <% } else {  %>
                    
                        <!--notification started-->
                        <li class="dropdown nav-item">
                          <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="far fa-bell"></i>Notifications <span class="badge"><%= notifications.length %></span></a>
                          <ul class="dropdown-menu nav-item">
                            <li>
                                <a href="/notifications">View past notifications</a>
                                <div class="dropdown-divider"></div>
                            </li>
                            <% if (currentUser && currentUser.isAdmin) { %>
                            <% notifications.forEach(function(notification) { %>                          
                                <li>
                                    <a href="/notifications/<%= notification.id %>">
                                        <%= notification.username %> has reserved a book called <%= notification.bookName %>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                </li>
                            <% }); %>
                            <% } %>
                          </ul>
                        </li>
                        <!--notification end-->
                        
                        <li class="nav-item"><a class="nav-link" href="/users/<%= currentUser.id %>">Signed in as <%= currentUser.username %></a></li>
                        <% if (currentUser && currentUser.isAdmin) { %>
                        <li class="nav-item"><a class="nav-link" href="/register">Register someone as admin</a></li>
                        <% } %>
                        <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                    <% }  %>
                </ul>
              </div>
        </nav>
        
        
        <div class="container">
            <% if(error && error.length > 0) { %>
                <div class="alert alert-danger" role="alert"><%= error %></div>
            <% } %>
            <% if(success && success.length > 0) { %>
            <div class="alert alert-success" role="alert"><%= success %></div>
            <% } %>
        </div>
        
        
        
        